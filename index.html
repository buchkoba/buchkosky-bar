<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buchkosky Bar</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&family=Bebas+Neue&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
/* ── RESET & BASE ─────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Cormorant Garamond', serif;
  background: #0e0c0a; color: #d4c9b0;
  min-height: 100vh; overflow-x: hidden;
}

/* ── CSS VARIABLES ────────────────────────────────────── */
:root {
  --gold: #C49A3C;
  --gold-light: #E8C76A;
  --gold-dim: rgba(196,154,60,0.25);
  --cream: #F5EFE0;
  --charcoal: #0e0c0a;
  --charcoal-2: #1a1714;
  --text: #d4c9b0;
  --text-dim: rgba(212,201,176,0.5);
  --text-faint: rgba(212,201,176,0.25);
  --border: rgba(196,154,60,0.15);
  --nav-h: 56px;
}

/* ── NOISE OVERLAY ────────────────────────────────────── */
body::after {
  content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 9999;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
  opacity: 0.022; mix-blend-mode: overlay;
}

/* ── TYPOGRAPHY HELPERS ───────────────────────────────── */
.mono { font-family: 'Space Mono', monospace; }
.serif { font-family: 'Playfair Display', serif; }
.display { font-family: 'Bebas Neue', sans-serif; }
.eyebrow {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.4em; text-transform: uppercase; color: var(--gold);
}
.section-rule {
  width: 100%; height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
  margin: 0;
}

/* ── NAV ──────────────────────────────────────────────── */
#main-nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  height: var(--nav-h); background: rgba(14,12,10,0.96);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--border);
  display: none; align-items: center; padding: 0 2rem;
}
#main-nav.visible { display: flex; }
.nav-brand {
  font-family: 'Playfair Display', serif; font-size: 1rem;
  font-style: italic; color: var(--gold); margin-right: auto;
  letter-spacing: 0.02em;
}
.nav-links { display: flex; gap: 0; }
.nav-link {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--text-dim); padding: 0 1.25rem; height: var(--nav-h);
  display: flex; align-items: center; cursor: pointer;
  border-bottom: 2px solid transparent; margin-bottom: -1px;
  background: none; border-top: none; border-left: none; border-right: none;
  transition: color 0.2s, border-color 0.2s;
}
.nav-link:hover { color: var(--text); }
.nav-link.active { color: var(--gold); border-bottom-color: var(--gold); }
.nav-instagram {
  color: var(--text-faint); font-size: 1rem; padding-left: 1rem;
  text-decoration: none; transition: color 0.2s;
  display: flex; align-items: center; height: var(--nav-h);
}
.nav-instagram:hover { color: var(--gold); }

/* ── PAGES ────────────────────────────────────────────── */
.page { display: none; min-height: 100vh; }
.page.active { 
  display: block; 
  animation: fadeInPage 0.5s ease both;
}

@keyframes fadeInPage {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ════════════════════════════════════════════════════════
   SPLASH PAGE
   ════════════════════════════════════════════════════════ */
#page-splash {
  flex-direction: column;
  align-items: center; justify-content: center;
  min-height: 100vh; padding: 3rem 2rem;
  background: radial-gradient(ellipse 100% 70% at 50% 40%,
    rgba(196,154,60,0.05) 0%, transparent 65%);
  position: relative;
}
#page-splash.active { display: flex; }

.splash-ornament {
  display: flex; align-items: center; gap: 1rem; margin-bottom: 2.5rem;
}
.splash-ornament-line {
  width: 80px; height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold));
}
.splash-ornament-line.right {
  background: linear-gradient(90deg, var(--gold), transparent);
}
.splash-ornament-diamond { color: var(--gold); font-size: 8px; }

.splash-eyebrow {
  font-family: 'Space Mono', monospace; font-size: 10px;
  letter-spacing: 0.45em; text-transform: uppercase; color: var(--gold);
  margin-bottom: 2rem; text-align: center;
  animation: fadeUp 0.8s ease both;
}

.splash-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(3.5rem, 14vw, 8rem);
  font-weight: 900; line-height: 0.88; text-align: center;
  color: var(--cream); letter-spacing: -0.02em;
  animation: fadeUp 0.8s 0.1s ease both;
}
.splash-title em {
  display: block; font-style: italic; font-weight: 400;
  color: var(--gold); font-size: 0.42em; letter-spacing: 0.08em;
  margin-bottom: 0.3rem;
}

.splash-tagline {
  font-family: 'Cormorant Garamond', serif; font-style: italic;
  font-size: 1.15rem; color: var(--text-dim); margin-top: 2rem;
  letter-spacing: 0.06em; text-align: center;
  animation: fadeUp 0.8s 0.2s ease both;
}

.splash-enter {
  margin-top: 3.5rem;
  background: none; border: 1px solid var(--gold);
  color: var(--gold); font-family: 'Space Mono', monospace;
  font-size: 10px; letter-spacing: 0.3em; text-transform: uppercase;
  padding: 1.1rem 3rem; cursor: pointer;
  transition: all 0.3s; position: relative; overflow: hidden;
  animation: fadeUp 0.8s 0.3s ease both;
}
.splash-enter::before {
  content: ''; position: absolute; inset: 0;
  background: var(--gold); transform: translateX(-101%);
  transition: transform 0.3s ease;
}
.splash-enter:hover::before { transform: translateX(0); }
.splash-enter:hover { color: #0e0c0a; }
.splash-enter-text { position: relative; z-index: 1; }

/* ════════════════════════════════════════════════════════
   MENU PAGE
   ════════════════════════════════════════════════════════ */
#page-menu { padding-top: var(--nav-h); }

.menu-hero {
  padding: 4rem 2rem 3rem;
  background: linear-gradient(180deg, rgba(196,154,60,0.04) 0%, transparent 100%);
  border-bottom: 1px solid var(--border);
  max-width: 960px; margin: 0 auto;
}
.menu-hero-meta {
  display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.25rem;
}
.menu-season-badge {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.3em; text-transform: uppercase;
  color: var(--charcoal); background: var(--gold);
  padding: 0.3rem 0.8rem;
}
.menu-date {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; color: var(--text-faint);
  text-transform: uppercase;
}
.menu-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2.5rem, 8vw, 5rem);
  font-weight: 900; color: var(--cream); line-height: 1;
  letter-spacing: -0.02em;
}
.menu-subtitle {
  font-style: italic; color: var(--text-dim); font-size: 1.1rem;
  margin-top: 0.75rem;
}

.menu-body { max-width: 960px; margin: 0 auto; padding: 0 2rem 4rem; }

.menu-category { padding: 2.5rem 0; border-bottom: 1px solid var(--border); }
.menu-category:last-child { border-bottom: none; }

.cat-header {
  display: flex; align-items: center; gap: 1.5rem; margin-bottom: 2rem;
}
.cat-title {
  font-family: 'Bebas Neue', sans-serif; font-size: 1rem;
  letter-spacing: 0.3em; color: var(--gold); white-space: nowrap;
}
.cat-rule {
  flex: 1; height: 1px;
  background: linear-gradient(90deg, var(--gold-dim), transparent);
}

.drinks-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem 3rem;
}

.drink-card { position: relative; }
.drink-card.is-special::before {
  content: '✦ Tonight\'s Special';
  font-family: 'Space Mono', monospace; font-size: 8px;
  letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--gold); display: block; margin-bottom: 0.4rem;
}
.drink-name {
  font-family: 'Playfair Display', serif; font-size: 1.05rem;
  font-weight: 700; color: var(--cream); margin-bottom: 0.3rem;
  line-height: 1.2;
}
.drink-ingredients {
  font-size: 0.9rem; font-style: italic; color: var(--text-dim);
  line-height: 1.5;
}

/* ════════════════════════════════════════════════════════
   ABOUT PAGE
   ════════════════════════════════════════════════════════ */
#page-about { padding-top: var(--nav-h); }

.about-hero {
  padding: 5rem 2rem 4rem; max-width: 720px; margin: 0 auto;
  border-bottom: 1px solid var(--border);
}
.about-eyebrow { margin-bottom: 1.5rem; }
.about-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2.5rem, 7vw, 4.5rem);
  font-weight: 900; color: var(--cream); line-height: 1.05;
  letter-spacing: -0.02em; margin-bottom: 2rem;
}
.about-title em { font-style: italic; color: var(--gold); }
.about-body {
  max-width: 720px; margin: 0 auto; padding: 3rem 2rem 5rem;
}
.about-p {
  font-size: 1.15rem; line-height: 1.9; color: var(--text-dim);
  margin-bottom: 1.75rem;
}
.about-p:last-of-type { margin-bottom: 0; }
.about-pull {
  font-family: 'Playfair Display', serif; font-style: italic;
  font-size: 1.5rem; color: var(--cream); line-height: 1.5;
  border-left: 2px solid var(--gold); padding-left: 1.5rem;
  margin: 2.5rem 0; max-width: 520px;
}

.about-cats {
  margin-top: 2.5rem; padding-top: 2.5rem; border-top: 1px solid var(--border);
}
.about-cats-title {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.35em; text-transform: uppercase;
  color: var(--gold); margin-bottom: 1rem;
}
.about-cats-text { font-size: 1.1rem; color: var(--text-dim); line-height: 1.8; }

.venmo-block {
  margin-top: 3rem; padding: 1.5rem 2rem;
  border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  gap: 1rem; flex-wrap: wrap; max-width: 520px;
  transition: border-color 0.3s;
}
.venmo-block:hover { border-color: var(--gold-dim); }
.venmo-text { font-style: italic; color: var(--text-dim); font-size: 1rem; }
.venmo-link {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--gold); text-decoration: none;
  border-bottom: 1px solid var(--gold-dim); padding-bottom: 2px;
  transition: border-color 0.2s;
  white-space: nowrap;
}
.venmo-link:hover { border-color: var(--gold); }

.photo-gallery {
  margin-top: 3rem; padding-top: 3rem; border-top: 1px solid var(--border);
}
.gallery-title {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.35em; text-transform: uppercase;
  color: var(--gold); margin-bottom: 2rem;
}
.gallery-grid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem; margin-bottom: 2rem;
}
.gallery-item {
  position: relative; overflow: hidden;
  border: 1px solid var(--border); aspect-ratio: 4/3;
  cursor: pointer; transition: border-color 0.3s;
}
.gallery-item:hover { border-color: var(--gold-dim); }
.gallery-img {
  width: 100%; height: 100%; object-fit: cover;
  transition: transform 0.3s;
}
.gallery-item:hover .gallery-img { transform: scale(1.05); }
.gallery-caption {
  position: absolute; bottom: 0; left: 0; right: 0;
  background: linear-gradient(transparent, rgba(14,12,10,0.95));
  padding: 2rem 1rem 0.75rem; font-size: 0.85rem;
  font-style: italic; color: var(--text-dim);
}

/* Lightbox */
.lightbox {
  display: none; position: fixed; inset: 0; z-index: 9999;
  background: rgba(0,0,0,0.95); align-items: center; justify-content: center;
  padding: 2rem; cursor: zoom-out;
}
.lightbox.active { display: flex; }
.lightbox-img {
  max-width: 90%; max-height: 90vh; object-fit: contain;
  border: 1px solid var(--border);
}
.lightbox-close {
  position: absolute; top: 2rem; right: 2rem;
  font-family: 'Space Mono', monospace; font-size: 2rem;
  color: var(--text); cursor: pointer; padding: 0.5rem;
  transition: color 0.2s;
}
.lightbox-close:hover { color: var(--gold); }

/* ════════════════════════════════════════════════════════
   ARCHIVE PAGE
   ════════════════════════════════════════════════════════ */
#page-archive { padding-top: var(--nav-h); }

.archive-header {
  padding: 4rem 2rem 3rem; max-width: 960px; margin: 0 auto;
  border-bottom: 1px solid var(--border);
}
.archive-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2rem, 6vw, 4rem);
  font-weight: 900; color: var(--cream); line-height: 1;
  letter-spacing: -0.02em; margin-bottom: 0.75rem;
}
.archive-count {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.3em; color: var(--text-faint); text-transform: uppercase;
}

.archive-filters {
  padding: 1.5rem 2rem; max-width: 960px; margin: 0 auto;
  display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;
}
.filter-label {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; color: var(--text-faint);
  text-transform: uppercase; margin-right: 0.5rem;
}
.filter-btn {
  background: none; border: 1px solid var(--border);
  color: var(--text-dim); font-family: 'Space Mono', monospace;
  font-size: 9px; letter-spacing: 0.15em; text-transform: uppercase;
  padding: 0.4rem 0.9rem; cursor: pointer; transition: all 0.2s;
}
.filter-btn:hover, .filter-btn.active {
  border-color: var(--gold); color: var(--gold); background: rgba(196,154,60,0.05);
}
.archive-search {
  background: none; border: 1px solid var(--border);
  color: var(--text); font-family: 'Cormorant Garamond', serif;
  font-size: 1rem; font-style: italic; padding: 0.4rem 1rem;
  outline: none; transition: border-color 0.2s; min-width: 200px;
}
.archive-search::placeholder { color: var(--text-faint); }
.archive-search:focus { border-color: var(--gold-dim); }

.archive-body { max-width: 960px; margin: 0 auto; padding: 1rem 2rem 4rem; }
.archive-group { margin-bottom: 2.5rem; }
.archive-group-title {
  font-family: 'Bebas Neue', sans-serif; font-size: 0.9rem;
  letter-spacing: 0.3em; color: var(--gold); margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border);
}
.archive-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 1rem 3rem;
}
.archive-drink { padding: 0.75rem 0; border-bottom: 1px solid rgba(196,154,60,0.07); }
.archive-drink-name {
  font-family: 'Playfair Display', serif; font-size: 0.95rem;
  font-weight: 600; color: var(--cream); margin-bottom: 0.2rem;
}
.archive-drink-ing {
  font-size: 0.85rem; font-style: italic; color: var(--text-faint); line-height: 1.4;
}
.on-menu-tag {
  font-family: 'Space Mono', monospace; font-size: 7px;
  letter-spacing: 0.15em; text-transform: uppercase;
  color: var(--gold); border: 1px solid var(--gold-dim);
  padding: 0.1rem 0.4rem; margin-left: 0.5rem;
  vertical-align: middle;
}
.archive-empty {
  font-style: italic; color: var(--text-faint); padding: 2rem 0;
  text-align: center; font-size: 1.1rem;
}

/* ════════════════════════════════════════════════════════
   PAST MENUS PAGE
   ════════════════════════════════════════════════════════ */
#page-past { padding-top: var(--nav-h); }

.past-header {
  padding: 4rem 2rem 3rem; max-width: 720px; margin: 0 auto;
  border-bottom: 1px solid var(--border);
}
.past-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2rem, 6vw, 4rem);
  font-weight: 900; color: var(--cream); line-height: 1; letter-spacing: -0.02em;
}

.past-body { max-width: 720px; margin: 0 auto; padding: 2rem 2rem 4rem; }
.past-menu-item {
  padding: 1.5rem 0; border-bottom: 1px solid var(--border);
  cursor: pointer; transition: all 0.2s;
  display: flex; align-items: center; justify-content: space-between; gap: 1rem;
}
.past-menu-item:hover .past-menu-name { color: var(--gold); }
.past-menu-item:hover .past-arrow { color: var(--gold); }
.past-menu-name {
  font-family: 'Playfair Display', serif; font-size: 1.2rem;
  font-weight: 700; color: var(--cream); transition: color 0.2s;
}
.past-menu-date {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; color: var(--text-faint);
  text-transform: uppercase; margin-top: 0.3rem;
}
.past-arrow { color: var(--text-faint); font-size: 1.2rem; transition: color 0.2s; }
.past-empty {
  font-style: italic; color: var(--text-faint); padding: 3rem 0;
  text-align: center; font-size: 1.1rem;
}

/* Past menu detail view */
.past-detail { display: none; }
.past-detail.active { display: block; }
.past-back {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--text-dim); background: none; border: none;
  cursor: pointer; padding: 0; margin-bottom: 2rem;
  display: flex; align-items: center; gap: 0.5rem;
  transition: color 0.2s;
}
.past-back:hover { color: var(--gold); }

/* ════════════════════════════════════════════════════════
   ADMIN PAGE
   ════════════════════════════════════════════════════════ */
#page-admin { padding-top: var(--nav-h); background: #0a0908; }
#admin-login {
  min-height: calc(100vh - var(--nav-h));
  display: flex; align-items: center; justify-content: center;
  padding: 2rem;
}
.admin-login-box {
  border: 1px solid var(--border); padding: 3rem; max-width: 380px; width: 100%;
}
.admin-login-title {
  font-family: 'Playfair Display', serif; font-size: 1.5rem;
  font-weight: 700; color: var(--cream); margin-bottom: 0.5rem;
}
.admin-login-sub {
  font-style: italic; color: var(--text-faint); font-size: 0.95rem;
  margin-bottom: 2rem;
}
.admin-input {
  width: 100%; background: rgba(255,255,255,0.04);
  border: 1px solid var(--border); color: var(--text);
  font-family: 'Space Mono', monospace; font-size: 0.9rem;
  padding: 0.85rem 1rem; outline: none; margin-bottom: 1rem;
  transition: border-color 0.2s;
}
.admin-input:focus { border-color: var(--gold-dim); }
.admin-btn {
  width: 100%; background: var(--gold); border: none;
  color: #0a0908; font-family: 'Space Mono', monospace;
  font-size: 10px; letter-spacing: 0.25em; text-transform: uppercase;
  padding: 1rem; cursor: pointer; transition: background 0.2s;
}
.admin-btn:hover { background: var(--gold-light); }
.admin-btn.secondary {
  background: none; border: 1px solid var(--border);
  color: var(--text-dim); margin-top: 0.5rem;
}
.admin-btn.secondary:hover { border-color: var(--gold-dim); color: var(--text); }
.admin-btn.danger {
  background: rgba(180,60,60,0.15); border: 1px solid rgba(180,60,60,0.3);
  color: #c47a7a;
}
.admin-btn.danger:hover { background: rgba(180,60,60,0.25); }
.admin-error { color: #c47a7a; font-size: 0.85rem; margin-top: 0.5rem; display: none; }

#admin-panel { display: none; padding: 2rem; max-width: 900px; margin: 0 auto; }
.admin-panel-title {
  font-family: 'Playfair Display', serif; font-size: 2rem;
  font-weight: 900; color: var(--cream); margin-bottom: 0.5rem;
}
.admin-section {
  border: 1px solid var(--border); padding: 2rem; margin-bottom: 1.5rem;
}
.admin-section-title {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.3em; text-transform: uppercase;
  color: var(--gold); margin-bottom: 1.25rem;
}
.admin-row { display: flex; gap: 0.75rem; flex-wrap: wrap; margin-bottom: 0.75rem; }
.admin-input-sm {
  flex: 1; min-width: 140px; background: rgba(255,255,255,0.04);
  border: 1px solid var(--border); color: var(--text);
  font-family: 'Cormorant Garamond', serif; font-size: 1rem;
  padding: 0.65rem 0.9rem; outline: none; transition: border-color 0.2s;
}
.admin-input-sm:focus { border-color: var(--gold-dim); }
.admin-select {
  background: rgba(255,255,255,0.04); border: 1px solid var(--border);
  color: var(--text); font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.1em; padding: 0.65rem 0.9rem; outline: none;
  cursor: pointer;
}
.admin-checkbox-row {
  display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;
}
.admin-checkbox-row label {
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.15em; text-transform: uppercase; color: var(--text-dim);
  cursor: pointer;
}
.admin-drink-list { margin-top: 1.5rem; }
.admin-drink-row {
  display: flex; align-items: flex-start; gap: 1rem; padding: 0.75rem 0;
  border-bottom: 1px solid rgba(196,154,60,0.07);
}
.admin-drink-info { flex: 1; }
.admin-drink-title {
  font-family: 'Playfair Display', serif; font-size: 0.95rem;
  font-weight: 600; color: var(--cream);
}
.admin-drink-meta {
  font-size: 0.8rem; font-style: italic; color: var(--text-faint); margin-top: 0.2rem;
}
.admin-drink-special {
  font-family: 'Space Mono', monospace; font-size: 7px;
  letter-spacing: 0.15em; text-transform: uppercase;
  color: var(--gold); border: 1px solid var(--gold-dim);
  padding: 0.1rem 0.4rem; margin-left: 0.5rem;
}
.admin-drink-actions { display: flex; gap: 0.5rem; flex-shrink: 0; }
.admin-icon-btn {
  background: none; border: 1px solid var(--border);
  color: var(--text-faint); font-size: 0.85rem; padding: 0.3rem 0.6rem;
  cursor: pointer; transition: all 0.2s; font-family: 'Space Mono', monospace;
  font-size: 9px; letter-spacing: 0.1em;
}
.admin-icon-btn:hover { border-color: var(--gold-dim); color: var(--gold); }
.admin-icon-btn.del:hover { border-color: rgba(180,60,60,0.4); color: #c47a7a; }
.admin-toast {
  position: fixed; bottom: 2rem; right: 2rem; z-index: 9998;
  background: var(--gold); color: #0a0908;
  font-family: 'Space Mono', monospace; font-size: 9px;
  letter-spacing: 0.2em; text-transform: uppercase;
  padding: 0.85rem 1.5rem; transform: translateY(100px);
  opacity: 0; transition: all 0.3s;
}
.admin-toast.show { transform: translateY(0); opacity: 1; }

/* ── ANIMATIONS ───────────────────────────────────────── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; } to { opacity: 1; }
}

/* ── RESPONSIVE ───────────────────────────────────────── */
@media (max-width: 600px) {
  .nav-links .nav-link:nth-child(n+3) { display: none; }
  .drinks-grid { grid-template-columns: 1fr; }
  .archive-grid { grid-template-columns: 1fr; }
  #admin-panel { padding: 1rem; }
}
</style>
</head>
<body>

<!-- ── NAV ──────────────────────────────────────────────── -->
<nav id="main-nav">
  <span class="nav-brand">Buchkosky Bar</span>
  <div class="nav-links">
    <button class="nav-link active" onclick="showPage('menu')">Menu</button>
    <button class="nav-link" onclick="showPage('about')">About</button>
    <button class="nav-link" onclick="showPage('archive')">Archive</button>
    <button class="nav-link" onclick="showPage('past')">Past Menus</button>
  </div>
  <a href="https://www.instagram.com/buchkosky/" target="_blank" class="nav-instagram" title="Instagram">&#9679;</a>
</nav>

<!-- ════════════════════════════════════════════════════════
     SPLASH
     ════════════════════════════════════════════════════════ -->
<div id="page-splash" class="page active">
  <div class="splash-ornament">
    <div class="splash-ornament-line"></div>
    <span class="splash-ornament-diamond">◆</span>
    <div class="splash-ornament-line right"></div>
  </div>
  <p class="splash-eyebrow">Est. 2015 &nbsp;·&nbsp; Minneapolis, MN</p>
  <h1 class="splash-title">
    <em>Welcome to</em>
    Buchkosky
  </h1>
  <p class="splash-tagline">A private bar. A long story. Pull up a stool.</p>
  <button class="splash-enter" onclick="enterBar()">
    <span class="splash-enter-text">Enter the Bar →</span>
  </button>
</div>

<!-- ════════════════════════════════════════════════════════
     MENU OF THE DAY
     ════════════════════════════════════════════════════════ -->
<div id="page-menu" class="page">
  <div class="menu-hero">
    <div class="menu-hero-meta">
      <span class="menu-season-badge" id="menu-season-badge">Fall</span>
      <span class="menu-date" id="menu-date-display"></span>
    </div>
    <h1 class="menu-title" id="menu-title-display">Menu of the Day</h1>
    <p class="menu-subtitle" id="menu-subtitle-display"></p>
  </div>
  <div class="menu-body" id="menu-body"></div>
</div>

<!-- ════════════════════════════════════════════════════════
     ABOUT
     ════════════════════════════════════════════════════════ -->
<div id="page-about" class="page">
  <div class="about-hero">
    <p class="eyebrow about-eyebrow">The Story</p>
    <h1 class="about-title">A bar born from<br><em>a friend's gift.</em></h1>
  </div>
  <div class="about-body">
    <p class="about-p">Ten years ago, a close friend was diagnosed with Parkinson's disease. Unable to drink any longer, he handed over his entire liquor collection — a staggering accumulation of bottles that covered every surface of the basement, stacked in Amazon boxes on the tile floor. A drum kit stood nearby. The old pool safety signs were still on the wall.</p>
    <div class="about-pull">"Rather than saying 'I can make you anything,' I started making menus. It's a lot easier to pick a drink from a list."</div>
    <p class="about-p">That collection became the seed of something bigger. The basement's hot tub, sauna, and wall-bar were gutted and rebuilt from scratch — navy cabinetry, marble countertops, penny tile backsplash, and a bold botanical mural that makes the whole room feel like it was always meant to be a bar. The original knotty pine sauna door still stands in the corner, crescent moon cutout and all, hiding the old sauna behind it.</p>
    <p class="about-p">As the collection grew past 100 bottles, so did the ambition. Each party, each season, each occasion gets its own menu — a curated selection of classics, riffs, and originals developed over a decade of hosting pool parties, holiday gatherings, and everything in between. The Buchkosky Old Fashioned has been on every menu. So has Freddie's Float.</p>
    <p class="about-p">Pickle and Tiger are the official bar staff. They work for neither tips nor wages, but Pickle has strong opinions about which bar stool is hers.</p>

    <div class="about-cats">
      <p class="about-cats-title">Bar Staff</p>
      <p class="about-cats-text"><strong style="color:var(--cream);">Pickle</strong> — the white one. Considers the bar stools her personal furniture. Blue eyes, strong opinions.<br>
      <strong style="color:var(--cream);">Tiger</strong> — the spotted one. Conducts nightly quality-control inspections of the back bar shelves.</p>
    </div>

    <div class="photo-gallery">
      <p class="gallery-title">The Transformation</p>
      <div class="gallery-grid">
        <div class="gallery-item" onclick="openLightbox('https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG_20181021_131021.jpg')">
          <img src="https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG_20181021_131021.jpg" alt="The gift that started it all" class="gallery-img">
          <div class="gallery-caption">The gift that started it all — October 2018</div>
        </div>
        <div class="gallery-item" onclick="openLightbox('https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG_20190323_113015.jpg')">
          <img src="https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG_20190323_113015.jpg" alt="Bar during remodel" class="gallery-img">
          <div class="gallery-caption">Mid-remodel — March 2019</div>
        </div>
        <div class="gallery-item" onclick="openLightbox('https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG_20190323_113024.jpg')">
          <img src="https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG_20190323_113024.jpg" alt="The knotty pine door" class="gallery-img">
          <div class="gallery-caption">The knotty pine sauna door</div>
        </div>
        <div class="gallery-item" onclick="openLightbox('https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG20220525180653.jpg')">
          <img src="https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/IMG20220525180653.jpg" alt="Finished bar" class="gallery-img">
          <div class="gallery-caption">The finished space — 2022</div>
        </div>
        <div class="gallery-item" onclick="openLightbox('https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/PXL_20221226_021705430_PORTRAIT.jpg')">
          <img src="https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/PXL_20221226_021705430_PORTRAIT.jpg" alt="The bottle collection" class="gallery-img">
          <div class="gallery-caption">The collection today</div>
        </div>
        <div class="gallery-item" onclick="openLightbox('https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/PXL_20221226_040209534_-_Copy.jpg')">
          <img src="https://raw.githubusercontent.com/buchkoba/buchkosky-bar/main/images/PXL_20221226_040209534_-_Copy.jpg" alt="Pickle supervising" class="gallery-img">
          <div class="gallery-caption">Pickle on duty</div>
        </div>
      </div>
    </div>

    <div class="venmo-block">
      <span class="venmo-text">Enjoyed your drinks? Buy Brian a round.</span>
      <a href="https://account.venmo.com/u/Brian-Buchkosky" target="_blank" class="venmo-link">♥ Venmo @Brian-Buchkosky</a>
    </div>
  </div>
</div>

<!-- ════════════════════════════════════════════════════════
     FULL ARCHIVE
     ════════════════════════════════════════════════════════ -->
<div id="page-archive" class="page">
  <div class="archive-header">
    <p class="eyebrow" style="margin-bottom:1rem;">The Collection</p>
    <h1 class="archive-title">Full Cocktail Archive</h1>
    <p class="archive-count" id="archive-count"></p>
  </div>
  <div class="archive-filters">
    <span class="filter-label">Filter:</span>
    <button class="filter-btn active" onclick="filterArchive('all', this)">All</button>
    <button class="filter-btn" onclick="filterArchive('Less Fruit', this)">Less Fruit</button>
    <button class="filter-btn" onclick="filterArchive('More Fruit', this)">More Fruit</button>
    <button class="filter-btn" onclick="filterArchive('After', this)">After</button>
    <button class="filter-btn" onclick="filterArchive('NA', this)">No Booze</button>
    <button class="filter-btn" onclick="filterArchive('Special', this)">Specials</button>
    <input type="text" class="archive-search" id="archive-search"
      placeholder="Search drinks..." oninput="searchArchive(this.value)">
  </div>
  <div class="archive-body" id="archive-body"></div>
</div>

<!-- ════════════════════════════════════════════════════════
     PAST MENUS
     ════════════════════════════════════════════════════════ -->
<div id="page-past" class="page">
  <div class="past-header">
    <p class="eyebrow" style="margin-bottom:1rem;">History</p>
    <h1 class="past-title">Past Menus</h1>
  </div>
  <div class="past-body">
    <div id="past-list"></div>
    <div id="past-detail" class="past-detail">
      <button class="past-back" onclick="showPastList()">← Back to all menus</button>
      <div id="past-detail-content"></div>
    </div>
  </div>
</div>

<!-- ════════════════════════════════════════════════════════
     ADMIN
     ════════════════════════════════════════════════════════ -->
<div id="page-admin" class="page">
  <!-- LOGIN -->
  <div id="admin-login">
    <div class="admin-login-box">
      <h2 class="admin-login-title">Admin</h2>
      <p class="admin-login-sub">Buchkosky Bar management panel</p>
      <input type="password" class="admin-input" id="admin-password"
        placeholder="Password" onkeydown="if(event.key==='Enter')adminLogin()">
      <button class="admin-btn" onclick="adminLogin()">Enter</button>
      <p class="admin-error" id="admin-error">Incorrect password.</p>
    </div>
  </div>

  <!-- PANEL -->
  <div id="admin-panel">
    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:2rem; flex-wrap:wrap; gap:1rem;">
      <h1 class="admin-panel-title">Admin Panel</h1>
      <button class="admin-btn secondary" style="width:auto; padding:0.6rem 1.5rem;" onclick="adminLogout()">Log Out</button>
    </div>

    <!-- Menu Settings -->
    <div class="admin-section">
      <p class="admin-section-title">Current Menu Settings</p>
      <div class="admin-row">
        <input type="text" class="admin-input-sm" id="admin-menu-title" placeholder="Menu title (e.g. Fall, Christmas)">
        <input type="text" class="admin-input-sm" id="admin-menu-subtitle" placeholder="Subtitle (optional)">
      </div>
      <button class="admin-btn" style="width:auto; padding:0.75rem 2rem;" onclick="saveMenuSettings()">Save Settings</button>
    </div>

    <!-- Add Drink -->
    <div class="admin-section">
      <p class="admin-section-title">Add a Cocktail to Tonight's Menu</p>
      <div class="admin-row">
        <input type="text" class="admin-input-sm" id="admin-drink-name" placeholder="Drink name">
        <input type="text" class="admin-input-sm" id="admin-drink-ingredients" placeholder="Ingredients">
      </div>
      <div class="admin-row">
        <select class="admin-select" id="admin-drink-category">
          <option value="Less Fruit">Less Fruit</option>
          <option value="More Fruit">More Fruit</option>
          <option value="After">After</option>
          <option value="NA">No Booze (NA)</option>
        </select>
      </div>
      <div class="admin-checkbox-row">
        <input type="checkbox" id="admin-drink-special">
        <label for="admin-drink-special">Mark as Tonight's Special</label>
      </div>
      <button class="admin-btn" style="width:auto; padding:0.75rem 2rem;" onclick="adminAddDrink()">Add to Menu</button>
    </div>

    <!-- Current Drink List -->
    <div class="admin-section">
      <p class="admin-section-title">Current Menu Drinks</p>
      <div class="admin-drink-list" id="admin-drink-list"></div>
      <div style="margin-top:1.5rem; padding-top:1.5rem; border-top:1px solid var(--border);">
        <p class="admin-section-title" style="margin-bottom:1rem;">Archive this menu as a past menu</p>
        <button class="admin-btn secondary" style="width:auto; padding:0.75rem 2rem;" onclick="archiveCurrentMenu()">Save to Past Menus</button>
      </div>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="admin-toast" id="admin-toast"></div>

<script>
// ════════════════════════════════════════════════════════
// DATA STORE
// ════════════════════════════════════════════════════════
const DEFAULT_MENU = {
  title: "Menu of the Day",
  season: "Fall",
  subtitle: "Pull up a stool.",
  drinks: [
    { id: 1, name: "Buchkosky Old Fashioned", ingredients: "2 Bourbon, .25 Chai Demerara Simple, Trinity Bitters", category: "Less Fruit", special: true },
    { id: 2, name: "Sazerac", ingredients: "1 Rye, .5 Cognac, .5 Apple Brandy, .25 Demerara Simple, Peychauds, Ango, Absinthe", category: "Less Fruit", special: false },
    { id: 3, name: "Vieux Carré", ingredients: ".75 Rye, .75 Sweet Vermouth, .75 Brandy, bar spoon Benedictine, Peychauds, Angostura", category: "Less Fruit", special: false },
    { id: 4, name: "Muppets Drink Manhattan", ingredients: "2 Rye, .5 Amaro, .5 Sweet Vermouth, Angostura, Peychauds, & Orange Bitters", category: "Less Fruit", special: false },
    { id: 5, name: "A La Louisiane", ingredients: "2 Rye, .75 Sweet Vermouth, .75 Benedictine, Peychauds, Angostura, Absinthe Rinse, Cherry", category: "Less Fruit", special: false },
    { id: 6, name: "Paper Plane", ingredients: ".75 Bourbon, .75 Aperol, .75 Amaro Nonino, .75 Lemon", category: "More Fruit", special: true },
    { id: 7, name: "Water Lily", ingredients: ".75 Gin, .75 oz Orange Liquor, .75 oz Lemon Juice, .75 Violette Liquor", category: "More Fruit", special: false },
    { id: 8, name: "Margarita", ingredients: "2 Tequila, .75 Orange, .75 Lime, .25 Simple", category: "More Fruit", special: false },
    { id: 9, name: "Disguised in Mexico", ingredients: "1 Pineapple Chipotle Gin, 1 Tequila, .25 Simple, .75 Grapefruit Liquor, .75 Lime", category: "More Fruit", special: false },
    { id: 10, name: "Aperol Sour", ingredients: "2 Aperol, .5 Gin, .25 Simple, .5 Lemon", category: "More Fruit", special: false },
    { id: 11, name: "Kentucky Carajillo", ingredients: "2 Bourbon Cream, 2 Cold Brew Coffee, .5 Liquor 43", category: "After", special: false },
    { id: 12, name: "Freddie's Float", ingredients: "Bourbon Cream & Root Beer (& maybe Ice Cream)", category: "After", special: false },
    { id: 13, name: "Faux Fashioned", ingredients: "2 NA Bourbon, .25 Chai Demerara Simple, Twist", category: "NA", special: false },
    { id: 14, name: "Gimlet", ingredients: "2 NA Gin, .75 Simple, .75 Lime", category: "NA", special: false },
  ]
};

const FULL_ARCHIVE = [
  { name: "Buchkosky Old Fashioned", ingredients: "2 Bourbon, .25 Chai Demerara Simple, Trinity Bitters", category: "Less Fruit" },
  { name: "Sazerac", ingredients: "1 Rye, .5 Cognac, .5 Apple Brandy, .25 Demerara Simple, Peychauds, Ango, Absinthe", category: "Less Fruit" },
  { name: "Vieux Carré", ingredients: ".75 Rye, .75 Sweet Vermouth, .75 Brandy, bar spoon Benedictine, Peychauds, Angostura", category: "Less Fruit" },
  { name: "Freezer Door Sazerac", ingredients: "2.5 oz, Absinthe, Lemon Twist", category: "Less Fruit" },
  { name: "A La Louisiane", ingredients: "2 Rye, .75 Sweet Vermouth, .75 Benedictine, Peychauds, Angostura, Absinthe Rinse, Cherry", category: "Less Fruit" },
  { name: "Muppets Drink Manhattan", ingredients: "2 Rye, .5 Amaro, .5 Sweet Vermouth, Angostura, Peychauds, & Orange Bitters", category: "Less Fruit" },
  { name: "Amaroni", ingredients: "1.5 Amaro Angostura, 1 Gin, .5 Sweet Vermouth, Orange Bitters, Twist", category: "Less Fruit" },
  { name: "Anejo Manhattan", ingredients: "2 Anejo Tequila, .5 Sweet Vermouth, Bitters", category: "Less Fruit" },
  { name: "White Negroni", ingredients: "1 Gin, 1 Suze (or Italicus), 1 Dry Vermouth", category: "Less Fruit" },
  { name: "Martini", ingredients: "2 Gin, .5 Dry Vermouth, Shitty Pimento Stuffed Olives", category: "Less Fruit" },
  { name: "Chrysanthemum", ingredients: "2 Dry Vermouth, 1 Benedictine, 2 Dashes Absinthe, Orange Bitters", category: "Less Fruit" },
  { name: "Poet's Dream", ingredients: "2 Gin, .75 Dry Vermouth, .25 Benedictine, Orange Bitters", category: "Less Fruit" },
  { name: "New Friend", ingredients: "1 Rye, 1 Aperol, 1 Cocchi Americano, Twist", category: "Less Fruit" },
  { name: "In Cold Blodo", ingredients: "1 Rye, 1 Cynar, 1 Sweet Vermouth, Twist", category: "Less Fruit" },
  { name: "Cherry Carray", ingredients: "2 Rye, .5 Cherry Heering, .5 Benedictine, Twist", category: "Less Fruit" },
  { name: "Haurt Man Here", ingredients: "1.5 Tequila, .75 Amaro, .75 Sweet Vermouth", category: "Less Fruit" },
  { name: "Paper Plane", ingredients: ".75 Bourbon, .75 Aperol, .75 Amaro Nonino, .75 Lemon", category: "More Fruit" },
  { name: "Water Lily", ingredients: ".75 Gin, .75 oz Orange Liquor, .75 oz Lemon Juice, .75 Violette Liquor", category: "More Fruit" },
  { name: "Margarita", ingredients: "2 Tequila, .75 Orange, .75 Lime, .25 Simple", category: "More Fruit" },
  { name: "Disguised in Mexico", ingredients: "1 Pineapple Chipotle Gin, 1 Tequila, .25 Simple, .75 Grapefruit Liquor, .75 Lime", category: "More Fruit" },
  { name: "Aperol Sour", ingredients: "2 Aperol, .5 Gin, .25 Simple, .5 Lemon", category: "More Fruit" },
  { name: "Lavender Gin Gimlet", ingredients: "2 Gin, .75 Simple, .75 Lime, Lavender Bitters", category: "More Fruit" },
  { name: "Fruity Freakin Pebbles", ingredients: "2 Gin, .75 Simple, .75 Lime, Fruity Pebbles Bitters", category: "More Fruit" },
  { name: "Clover Club", ingredients: "2 Gin, .75 Simple, .75 Lime, Raspberries", category: "More Fruit" },
  { name: "Paloma", ingredients: "2 Tequila, .25 Simple, .75 Grapefruit Liquor, .75 oz Lime Juice, Grapefruit Soda", category: "More Fruit" },
  { name: "Lychee Margarita", ingredients: "2 Tequila, .75 Soho, .75 Lime, .25 Simple", category: "More Fruit" },
  { name: "Watermelon Lychee Margarita", ingredients: "2 Tequila, .75 Soho, .75 Lime, .25 Simple, Watermelon Soda", category: "More Fruit" },
  { name: "L&I Whiskey Sour", ingredients: "2 Bourbon, .75 Simple, .75 Lime, Cherry Vanilla Bitters", category: "More Fruit" },
  { name: "Sage Whiskey Sour", ingredients: "2 Bourbon, .75 Simple, .75 Lime, Angostura, Sage", category: "More Fruit" },
  { name: "Summer Sour", ingredients: "2 Coconut Washed Bourbon, .75 Simple, .75 Lime, Angostura & Peach Bitters", category: "More Fruit" },
  { name: "Grown Up Cotton Candy", ingredients: "2 Gin, .75 Simple, .75 Lime, Cucumber, Cotton Candy Grapes", category: "More Fruit" },
  { name: "Lychee Glad Ya Here", ingredients: "2 Gin, .75 Simple, .75 Lime, Lychee Juice, Soda", category: "More Fruit" },
  { name: "Dragon Medicine", ingredients: "2 Gin, .75 Dragon Fruit Simple, .75 Lime", category: "More Fruit" },
  { name: "Go-Go Gogi Fashioned", ingredients: "2 Barreled Gin, .25 Gojiberry Simple, Bitters", category: "More Fruit" },
  { name: "Mexican Candy", ingredients: "2 Tequila, .75 Simple, .75 Lime, Orange Bitters, Pineapple Soda", category: "More Fruit" },
  { name: "Lake & Irving", ingredients: "2 Tequila, 1.25 Tepache, .75 Lime, .5 Coconut Water, .5 Simple", category: "More Fruit" },
  { name: "Clarified Batanga", ingredients: "Clarified tequila & coke, carbonated", category: "More Fruit" },
  { name: "Summer Fashioned", ingredients: "2 Coconut Washed Bourbon, 1 Tepache, .25 Simple, Angostura & Peach Bitters", category: "More Fruit" },
  { name: "Aperol Spritz", ingredients: "2 Aperol, 3 Prosecco, 1 Soda, Orange", category: "More Fruit" },
  { name: "Kentucky Carajillo", ingredients: "2 Bourbon Cream, 2 Cold Brew Coffee, .5 Liquor 43", category: "After" },
  { name: "Freddie's Float", ingredients: "Bourbon Cream & Root Beer (& maybe Ice Cream)", category: "After" },
  { name: "Old Mashmallow Man", ingredients: "2 Bourbon, .25 Toasted Marshmallow Simple, Bitters", category: "After" },
  { name: "Faux Fashioned", ingredients: "2 NA Bourbon, .25 Chai Demerara Simple, Twist", category: "NA" },
  { name: "Gimlet", ingredients: "2 NA Gin, .75 Simple, .75 Lime", category: "NA" },
  { name: '"Gin" N Tonic', ingredients: "NA Gin n Tonic, ya", category: "NA" },
];

// ════════════════════════════════════════════════════════
// STATE
// ════════════════════════════════════════════════════════
let state = {
  menu: JSON.parse(localStorage.getItem('bk_menu') || JSON.stringify(DEFAULT_MENU)),
  pastMenus: JSON.parse(localStorage.getItem('bk_past') || '[]'),
  adminLoggedIn: false,
  archiveFilter: 'all',
  archiveSearch: '',
};

const ADMIN_PASS = 'buchkosky2025';

function saveState() {
  localStorage.setItem('bk_menu', JSON.stringify(state.menu));
  localStorage.setItem('bk_past', JSON.stringify(state.pastMenus));
}

// ════════════════════════════════════════════════════════
// NAVIGATION
// ════════════════════════════════════════════════════════
function enterBar() {
  document.getElementById('page-splash').classList.remove('active');
  document.getElementById('main-nav').classList.add('visible');
  showPage('menu');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function showPage(name) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
  document.getElementById('page-' + name).classList.add('active');
  const links = document.querySelectorAll('.nav-link');
  const pages = ['menu','about','archive','past'];
  const idx = pages.indexOf(name);
  if (idx >= 0) links[idx].classList.add('active');
  window.scrollTo(0, 0);
  if (name === 'menu') renderMenu();
  if (name === 'archive') renderArchive();
  if (name === 'past') renderPastList();
}

// ════════════════════════════════════════════════════════
// MENU RENDER
// ════════════════════════════════════════════════════════
function renderMenu() {
  const m = state.menu;
  document.getElementById('menu-season-badge').textContent = m.season || 'Tonight';
  document.getElementById('menu-title-display').textContent = m.title || 'Menu of the Day';
  document.getElementById('menu-subtitle-display').textContent = m.subtitle || '';
  const now = new Date();
  document.getElementById('menu-date-display').textContent =
    now.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

  const categories = ['Less Fruit', 'More Fruit', 'After', 'NA'];
  const catLabels = { 'Less Fruit': 'Less Fruit', 'More Fruit': 'More Fruit', 'After': 'After', 'NA': 'No Booze' };
  let html = '';
  categories.forEach(cat => {
    const drinks = m.drinks.filter(d => d.category === cat);
    if (!drinks.length) return;
    html += `<div class="menu-category">
      <div class="cat-header">
        <span class="cat-title">${catLabels[cat]}</span>
        <div class="cat-rule"></div>
      </div>
      <div class="drinks-grid">`;
    drinks.forEach(d => {
      html += `<div class="drink-card${d.special ? ' is-special' : ''}">
        <div class="drink-name">${d.name}</div>
        <div class="drink-ingredients">${d.ingredients}</div>
      </div>`;
    });
    html += `</div></div>`;
  });
  document.getElementById('menu-body').innerHTML = html;
}

// ════════════════════════════════════════════════════════
// ARCHIVE RENDER
// ════════════════════════════════════════════════════════
function getArchiveOnMenuNames() {
  return new Set(state.menu.drinks.map(d => d.name.toLowerCase()));
}

function renderArchive() {
  const onMenu = getArchiveOnMenuNames();
  let drinks = [...FULL_ARCHIVE];

  if (state.archiveSearch) {
    const q = state.archiveSearch.toLowerCase();
    drinks = drinks.filter(d =>
      d.name.toLowerCase().includes(q) || d.ingredients.toLowerCase().includes(q));
  }
  if (state.archiveFilter !== 'all') {
    if (state.archiveFilter === 'Special') {
      const specialNames = new Set(state.menu.drinks.filter(d => d.special).map(d => d.name.toLowerCase()));
      drinks = drinks.filter(d => specialNames.has(d.name.toLowerCase()));
    } else {
      drinks = drinks.filter(d => d.category === state.archiveFilter);
    }
  }

  document.getElementById('archive-count').textContent =
    `${drinks.length} cocktail${drinks.length !== 1 ? 's' : ''} in the archive`;

  if (!drinks.length) {
    document.getElementById('archive-body').innerHTML =
      '<p class="archive-empty">No drinks found.</p>';
    return;
  }

  const groups = {};
  drinks.forEach(d => {
    if (!groups[d.category]) groups[d.category] = [];
    groups[d.category].push(d);
  });

  const order = ['Less Fruit', 'More Fruit', 'After', 'NA'];
  const labels = { 'Less Fruit': 'Less Fruit', 'More Fruit': 'More Fruit', 'After': 'After', 'NA': 'No Booze' };
  let html = '';
  order.forEach(cat => {
    if (!groups[cat]) return;
    html += `<div class="archive-group">
      <div class="archive-group-title">${labels[cat]}</div>
      <div class="archive-grid">`;
    groups[cat].sort((a,b) => a.name.localeCompare(b.name)).forEach(d => {
      const isOn = onMenu.has(d.name.toLowerCase());
      html += `<div class="archive-drink">
        <div class="archive-drink-name">${d.name}${isOn ? '<span class="on-menu-tag">On Menu</span>' : ''}</div>
        <div class="archive-drink-ing">${d.ingredients}</div>
      </div>`;
    });
    html += `</div></div>`;
  });
  document.getElementById('archive-body').innerHTML = html;
}

function filterArchive(filter, btn) {
  state.archiveFilter = filter;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderArchive();
}
function searchArchive(val) {
  state.archiveSearch = val;
  renderArchive();
}

// ════════════════════════════════════════════════════════
// PAST MENUS
// ════════════════════════════════════════════════════════
function renderPastList() {
  const list = state.pastMenus;
  document.getElementById('past-detail').classList.remove('active');
  const el = document.getElementById('past-list');
  if (!list.length) {
    el.innerHTML = '<p class="past-empty">No past menus archived yet.</p>';
    return;
  }
  el.innerHTML = [...list].reverse().map((m, i) => `
    <div class="past-menu-item" onclick="showPastDetail(${list.length - 1 - i})">
      <div>
        <div class="past-menu-name">${m.title} — ${m.season}</div>
        <div class="past-menu-date">${m.archivedAt}</div>
      </div>
      <span class="past-arrow">→</span>
    </div>`).join('');
}

function showPastDetail(idx) {
  const m = state.pastMenus[idx];
  document.getElementById('past-list').style.display = 'none';
  const detail = document.getElementById('past-detail');
  detail.classList.add('active');

  const categories = ['Less Fruit', 'More Fruit', 'After', 'NA'];
  const catLabels = { 'Less Fruit': 'Less Fruit', 'More Fruit': 'More Fruit', 'After': 'After', 'NA': 'No Booze' };
  let html = `<div style="margin-bottom:2rem;">
    <span class="menu-season-badge" style="display:inline-block; margin-bottom:1rem;">${m.season}</span>
    <h2 style="font-family:'Playfair Display',serif; font-size:2.5rem; font-weight:900; color:var(--cream); line-height:1;">${m.title}</h2>
    <p style="font-family:'Space Mono',monospace; font-size:9px; letter-spacing:0.2em; color:var(--text-faint); text-transform:uppercase; margin-top:0.75rem;">${m.archivedAt}</p>
  </div>`;

  categories.forEach(cat => {
    const drinks = m.drinks.filter(d => d.category === cat);
    if (!drinks.length) return;
    html += `<div class="menu-category">
      <div class="cat-header"><span class="cat-title">${catLabels[cat]}</span><div class="cat-rule"></div></div>
      <div class="drinks-grid">`;
    drinks.forEach(d => {
      html += `<div class="drink-card">
        <div class="drink-name">${d.name}</div>
        <div class="drink-ingredients">${d.ingredients}</div>
      </div>`;
    });
    html += `</div></div>`;
  });
  document.getElementById('past-detail-content').innerHTML = html;
}

function showPastList() {
  document.getElementById('past-list').style.display = 'block';
  document.getElementById('past-detail').classList.remove('active');
}

// ════════════════════════════════════════════════════════
// ADMIN
// ════════════════════════════════════════════════════════
function adminLogin() {
  const pw = document.getElementById('admin-password').value;
  if (pw === ADMIN_PASS) {
    state.adminLoggedIn = true;
    document.getElementById('admin-login').style.display = 'none';
    document.getElementById('admin-panel').style.display = 'block';
    renderAdminPanel();
  } else {
    document.getElementById('admin-error').style.display = 'block';
  }
}
function adminLogout() {
  state.adminLoggedIn = false;
  document.getElementById('admin-login').style.display = 'flex';
  document.getElementById('admin-panel').style.display = 'none';
  document.getElementById('admin-password').value = '';
  document.getElementById('admin-error').style.display = 'none';
}

function renderAdminPanel() {
  const m = state.menu;
  document.getElementById('admin-menu-title').value = m.title || '';
  document.getElementById('admin-menu-subtitle').value = m.subtitle || '';
  renderAdminDrinks();
}

function renderAdminDrinks() {
  const catLabels = { 'Less Fruit': 'Less Fruit', 'More Fruit': 'More Fruit', 'After': 'After', 'NA': 'No Booze' };
  const list = document.getElementById('admin-drink-list');
  if (!state.menu.drinks.length) {
    list.innerHTML = '<p style="color:var(--text-faint); font-style:italic;">No drinks on the menu yet.</p>';
    return;
  }
  list.innerHTML = state.menu.drinks.map((d, i) => `
    <div class="admin-drink-row">
      <div class="admin-drink-info">
        <div class="admin-drink-title">${d.name}${d.special ? '<span class="admin-drink-special">Special</span>' : ''}</div>
        <div class="admin-drink-meta">${catLabels[d.category]} · ${d.ingredients}</div>
      </div>
      <div class="admin-drink-actions">
        <button class="admin-icon-btn" onclick="toggleSpecial(${i})">${d.special ? 'Unmark' : 'Special'}</button>
        <button class="admin-icon-btn del" onclick="adminDeleteDrink(${i})">Remove</button>
      </div>
    </div>`).join('');
}

function saveMenuSettings() {
  state.menu.title = document.getElementById('admin-menu-title').value || 'Menu of the Day';
  state.menu.subtitle = document.getElementById('admin-menu-subtitle').value || '';
  state.menu.season = document.getElementById('admin-menu-title').value || 'Tonight';
  saveState();
  showToast('Menu settings saved!');
}

function adminAddDrink() {
  const name = document.getElementById('admin-drink-name').value.trim();
  const ing = document.getElementById('admin-drink-ingredients').value.trim();
  const cat = document.getElementById('admin-drink-category').value;
  const special = document.getElementById('admin-drink-special').checked;
  if (!name || !ing) { showToast('Please fill in name and ingredients.'); return; }
  state.menu.drinks.push({
    id: Date.now(), name, ingredients: ing, category: cat, special
  });
  saveState();
  document.getElementById('admin-drink-name').value = '';
  document.getElementById('admin-drink-ingredients').value = '';
  document.getElementById('admin-drink-special').checked = false;
  renderAdminDrinks();
  showToast(`${name} added to menu!`);
}

function adminDeleteDrink(idx) {
  const name = state.menu.drinks[idx].name;
  state.menu.drinks.splice(idx, 1);
  saveState();
  renderAdminDrinks();
  showToast(`${name} removed.`);
}

function toggleSpecial(idx) {
  state.menu.drinks[idx].special = !state.menu.drinks[idx].special;
  saveState();
  renderAdminDrinks();
  showToast(state.menu.drinks[idx].special ? '✦ Marked as special!' : 'Special removed.');
}

function archiveCurrentMenu() {
  const archived = {
    ...JSON.parse(JSON.stringify(state.menu)),
    archivedAt: new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })
  };
  state.pastMenus.push(archived);
  saveState();
  showToast('Menu archived to Past Menus!');
}

function showToast(msg) {
  const t = document.getElementById('admin-toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

// ════════════════════════════════════════════════════════
// HANDLE /admin URL
// ════════════════════════════════════════════════════════
if (window.location.hash === '#admin') {
  enterBar();
  showPage('admin');
}

// Handle nav click to admin (secret: click brand 5 times)
let brandClicks = 0;
document.querySelector('.nav-brand').addEventListener('click', () => {
  brandClicks++;
  if (brandClicks >= 5) {
    brandClicks = 0;
    showPage('admin');
  }
});

// ════════════════════════════════════════════════════════
// LIGHTBOX
// ════════════════════════════════════════════════════════
function openLightbox(src) {
  document.getElementById('lightbox-img').src = src;
  document.getElementById('lightbox').classList.add('active');
  document.body.style.overflow = 'hidden';
}
function closeLightbox() {
  document.getElementById('lightbox').classList.remove('active');
  document.body.style.overflow = '';
}
</script>

<!-- Lightbox -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
  <span class="lightbox-close">×</span>
  <img src="" alt="" class="lightbox-img" id="lightbox-img">
</div>

</body>
</html>
